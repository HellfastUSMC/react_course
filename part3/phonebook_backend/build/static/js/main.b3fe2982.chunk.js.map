{"version":3,"sources":["loading.gif","db_ops.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","baseUrl","errMsg","setError","msg","setInterval","actionMsg","setActMsg","contactsRefresh","setPersons","axios","get","then","response","data","phonebook","Search","_ref","newSearch","setSearch","react_default","a","createElement","Fragment","value","onChange","event","target","Persons","_ref2","persons","output","handleDel","person","id","delete","_","concat","name","catch","filter","toLowerCase","includes","className","map","key","number","onClick","width","src","require","alt","AddContact","_ref3","_useState","useState","_useState2","Object","slicedToArray","newName","setNewName","_useState3","_useState4","newNumber","setNewNumber","onSubmit","preventDefault","newContact","personObj","some","val","window","confirm","contact","find","put","error","post","addEntry","console","log","message","type","ErrorMsg","_ref4","ActMsg","_ref5","App","_useState5","_useState6","_useState7","_useState8","_useState9","_useState10","_useState11","_useState12","useEffect","App_ErrorMsg","App_ActMsg","App_Search","App_Persons","App_AddContact","ReactDOM","createRoot","document","getElementById","render","src_App"],"mappings":"qIAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,wICElCC,EAAU,gBCEVC,SAAS,SAACC,EAAUC,GACxBD,EAASC,GACTC,YAAY,WAAOF,EAAS,KAAM,OAG9BG,EAAY,SAACC,EAAWH,GAC5BG,EAAUH,GACVC,YAAY,WAAOE,EAAU,KAAM,MAG/BC,EAAkB,SAACC,GDTPC,IAAMC,IAAIV,GACXW,KAAK,SAAAC,GAAQ,OAAIA,EAASC,OCS5BF,KAAK,SAAAG,GAAcN,EAAWM,MAGvCC,EAAS,SAAAC,GAA4B,IAA1BC,EAA0BD,EAA1BC,UAAWC,EAAeF,EAAfE,UAI1B,OACEC,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,SAAOE,MAAON,EAAWO,SANR,SAACC,GACpBP,EAAUO,EAAMC,OAAOH,YAUrBI,EAAU,SAAAC,GAA2D,IAAzDC,EAAyDD,EAAzDC,QAASrB,EAAgDoB,EAAhDpB,WAAYS,EAAoCW,EAApCX,UAAWf,EAAyB0B,EAAzB1B,SAAUI,EAAesB,EAAftB,UACtDwB,EAASD,EAEPE,EAAY,SAACC,GDdL,IAACC,KCeLD,EAAOC,GDdDxB,IAAMyB,OAAOlC,EAAQ,IAAIiC,GAC1BtB,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QCcpCF,KAAK,SAAAwB,GACJ5B,EAAgBC,GAChBH,EAAUC,EAAD,WAAA8B,OAAuBJ,EAAOK,KAA9B,eAGVC,MAAM,SAAAH,GACL5B,EAAgBC,GAChBP,EAAOC,EAAD,WAAAkC,OAAsBJ,EAAOK,KAA7B,wBAQZ,MAHkB,KAAdpB,IACFa,EAASD,EAAQU,OAAO,SAAAP,GAAM,OAAIA,EAAOK,KAAKG,cAAcC,SAASxB,EAAUuB,kBAE7EX,EAEAV,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,OAAKqB,UAAU,aACZZ,EAAOa,IAAI,SAAAX,GAAM,OAChBb,EAAAC,EAAAC,cAAA,OAAKqB,UAAU,UAAUE,IAAKZ,EAAOC,IACnCd,EAAAC,EAAAC,cAAA,mBAAWW,EAAOK,MAClBlB,EAAAC,EAAAC,cAAA,oBAAYW,EAAOa,QACnB1B,EAAAC,EAAAC,cAAA,UAAQyB,QAAS,kBAAMf,EAAUC,KAAjC,UACAb,EAAAC,EAAAC,cAAA,gBAORF,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,OAAK0B,MAAO,IAAKC,IAAKC,EAAQ,IAAkBC,IAAI,cAMtDC,EAAa,SAAAC,GAAgD,IAA9CvB,EAA8CuB,EAA9CvB,QAASrB,EAAqC4C,EAArC5C,WAAYN,EAAyBkD,EAAzBlD,SAAUI,EAAe8C,EAAf9C,UAAe+C,EACnCC,mBAAS,IAD0BC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAC1DK,EAD0DH,EAAA,GACjDI,EADiDJ,EAAA,GAAAK,EAE/BN,mBAAS,IAFsBO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAE1DE,EAF0DD,EAAA,GAE/CE,EAF+CF,EAAA,GAmDjE,OACE1C,EAAAC,EAAAC,cAAAF,EAAAC,EAAAE,SAAA,KACEH,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,QAAM2C,SA1CQ,SAACvC,GACjBA,EAAMwC,iBACN,ID1EiBhC,EAAIiC,EC0EfC,EAAY,CAChB9B,KAAMqB,EACNb,OAAQiB,GAEV,GAAIjC,EAAQuC,KAAK,SAAAC,GAAG,OAAIA,EAAIhC,OAAS8B,EAAU9B,QAC7C,GAAIiC,OAAOC,QAAP,GAAAnC,OAAkBsB,EAAlB,mDAA4E,CAC9E,IAAMc,EAAU3C,EAAQ4C,KAAK,SAAAD,GAAO,OAAIA,EAAQnC,OAAS8B,EAAU9B,QDhFtDJ,ECiFDuC,EAAQvC,GDjFHiC,ECiFOC,EDhFd1D,IAAMiE,IAAI1E,EAAQ,IAAIiC,EAAIiC,GAC3BvD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QCgFhCF,KAAK,SAAAwB,GACJ5B,EAAgBC,GAChBH,EAAUC,EAAD,WAAA8B,OAAuB+B,EAAU9B,KAAjC,aACTsB,EAAW,IACXI,EAAa,MAGdzB,MAAM,SAAAqC,GACLpE,EAAgBC,GAChBP,EAAOC,EAAD,2BAAAkC,OAAsC+B,EAAU9B,KAAhD,OAAAD,OAA0DuC,EAAM/D,SAASC,KAAK8D,gBDhG/E,SAACT,GAEhB,OADgBzD,IAAMmE,KAAK5E,EAASkE,GACrBvD,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QCmGrCgE,CAASV,GACNxD,KAAK,SAAAwB,GACN5B,EAAgBC,GAChBH,EAAUC,EAAD,WAAA8B,OAAuB+B,EAAU9B,KAAjC,WACTsB,EAAW,IACXI,EAAa,MAGZzB,MAAM,SAAAqC,GACLG,QAAQC,IAAIJ,EAAOA,EAAMK,SACzB/E,EAAOC,EAAD,0BAAAkC,OAAqCuC,EAAM/D,SAASC,KAAK8D,YASjExD,EAAAC,EAAAC,cAAA,OAAKqB,UAAU,eACbvB,EAAAC,EAAAC,cAAA,kBAASF,EAAAC,EAAAC,cAAA,SAAOE,MAAOmC,EAASlC,SApDhB,SAACC,GACvBkC,EAAWlC,EAAMC,OAAOH,WAoDlBJ,EAAAC,EAAAC,cAAA,mBAAUF,EAAAC,EAAAC,cAAA,SAAOE,MAAOuC,EAAWtC,SAjDlB,SAACC,GACxBsC,EAAatC,EAAMC,OAAOH,WAiDpBJ,EAAAC,EAAAC,cAAA,UAAQ4D,KAAK,UAAb,WAOJC,EAAW,SAAAC,GAAW,IAAThF,EAASgF,EAAThF,IACjB,GAAIA,EACF,OACEgB,EAAAC,EAAAC,cAAA,OAAKqB,UAAU,SACZvC,IAMHiF,EAAS,SAAAC,GAAW,IAATlF,EAASkF,EAATlF,IACf,GAAIA,EACF,OACEgB,EAAAC,EAAAC,cAAA,OAAKqB,UAAU,SACZvC,IA0BMmF,EApBH,WAAM,IAAAC,EACejC,mBAAS,IADxBkC,EAAAhC,OAAAC,EAAA,EAAAD,CAAA+B,EAAA,GACTtE,EADSuE,EAAA,GACEtE,EADFsE,EAAA,GAAAC,EAEcnC,qBAFdoC,EAAAlC,OAAAC,EAAA,EAAAD,CAAAiC,EAAA,GAET5D,EAFS6D,EAAA,GAEAlF,EAFAkF,EAAA,GAAAC,EAGUrC,mBAAS,IAHnBsC,EAAApC,OAAAC,EAAA,EAAAD,CAAAmC,EAAA,GAGThB,EAHSiB,EAAA,GAGF1F,EAHE0F,EAAA,GAAAC,EAIevC,mBAAS,IAJxBwC,EAAAtC,OAAAC,EAAA,EAAAD,CAAAqC,EAAA,GAITxF,EAJSyF,EAAA,GAIExF,EAJFwF,EAAA,GAQhB,OAHAC,oBAAU,WACNxF,EAAgBC,IACf,IAEHW,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC2E,EAAD,CAAU7F,IAAKwE,IACfxD,EAAAC,EAAAC,cAAC4E,EAAD,CAAQ9F,IAAKE,IACbc,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAC6E,EAAD,CAAQjF,UAAWA,EAAWC,UAAWA,IACzCC,EAAAC,EAAAC,cAAC8E,EAAD,CAAStE,QAASA,EAASrB,WAAYA,EAAYS,UAAWA,EAAWf,SAAUA,EAAUI,UAAWA,IACxGa,EAAAC,EAAAC,cAAC+E,EAAD,CAAYvE,QAASA,EAASrB,WAAYA,EAAYN,SAAUA,EAAUI,UAAWA,MCzK3F+F,IAASC,WAAWC,SAASC,eAAe,SAASC,OAAOtF,EAAAC,EAAAC,cAACqF,EAAD","file":"static/js/main.b3fe2982.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loading.f5e5b5e6.gif\";","import axios from 'axios'\r\n\r\nconst baseUrl = 'api/phonebook'\r\n\r\nconst getEntries = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst addEntry = (newContact) => {\r\n  const request = axios.post(baseUrl, newContact)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst updateEntry = (id, newContact) => {\r\n  const request = axios.put(baseUrl+'/'+id, newContact)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst rmEntry = (id) => {\r\n  const request = axios.delete(baseUrl+'/'+id)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport {\r\n    getEntries,\r\n    addEntry,\r\n    updateEntry,\r\n    rmEntry\r\n}","import React, { useState, useEffect } from 'react'\r\nimport {getEntries, addEntry, updateEntry, rmEntry} from './db_ops'\r\nimport './css/App.css'\r\n\r\nconst errMsg = (setError, msg) => {\r\n  setError(msg)\r\n  setInterval(() => {setError('')}, 5000)\r\n}\r\n\r\nconst actionMsg = (setActMsg, msg) => {\r\n  setActMsg(msg)\r\n  setInterval(() => {setActMsg('')}, 5000)\r\n}\r\n\r\nconst contactsRefresh = (setPersons) => {\r\n  getEntries().then(phonebook => {setPersons(phonebook)})\r\n}\r\n\r\nconst Search = ({newSearch, setSearch}) => {\r\n  const handleSearch = (event) => {\r\n    setSearch(event.target.value)\r\n  }\r\n  return (\r\n    <>\r\n      <h2>Search</h2>\r\n      <input value={newSearch} onChange={handleSearch}/>\r\n    </>\r\n  )\r\n}\r\n\r\nconst Persons = ({persons, setPersons, newSearch, setError, setActMsg}) => {\r\n  let output = persons\r\n\r\n  const handleDel = (person) => {\r\n    rmEntry(person.id)\r\n      .then(_ => {\r\n        contactsRefresh(setPersons)\r\n        actionMsg(setActMsg, `Contact ${person.name} deleted`)\r\n        }\r\n      )\r\n      .catch(_ => {\r\n        contactsRefresh(setPersons)\r\n        errMsg(setError, `Contact ${person.name} already removed`)\r\n        }\r\n      )\r\n  }\r\n\r\n  if (newSearch !== '') {\r\n    output = persons.filter(person => person.name.toLowerCase().includes(newSearch.toLowerCase()))\r\n  }\r\n  if (persons){\r\n    return (\r\n      <>\r\n        <h2>Numbers</h2>\r\n        <div className='phonebook'>\r\n          {output.map(person => (\r\n            <div className='contact' key={person.id}>\r\n              <p>Name - {person.name}</p>\r\n              <p>Phone - {person.number}</p>\r\n              <button onClick={() => handleDel(person)}>Delete</button>\r\n              <hr/>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </>\r\n  )} else {\r\n    return (\r\n      <p>\r\n        <img width={150} src={require('./loading.gif')} alt='loading' />\r\n      </p>\r\n    )\r\n  }\r\n}\r\n\r\nconst AddContact = ({persons, setPersons, setError, setActMsg}) => {\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n\r\n  const handleNameInput = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handlePhoneInput = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleAdd = (event) => {\r\n    event.preventDefault()\r\n    const personObj = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    if (persons.some(val => val.name === personObj.name)) {\r\n      if (window.confirm(`${newName} already exists, do you want to update number?`)) {\r\n        const contact = persons.find(contact => contact.name === personObj.name)\r\n        updateEntry(contact.id, personObj)\r\n          .then(_ => {\r\n            contactsRefresh(setPersons)\r\n            actionMsg(setActMsg, `Contact ${personObj.name} updated`)\r\n            setNewName('')\r\n            setNewNumber('')\r\n            }\r\n          )\r\n          .catch(error => {\r\n            contactsRefresh(setPersons)\r\n            errMsg(setError, `Cannot update a contact ${personObj.name} - ${error.response.data.error}`)\r\n            }\r\n          )\r\n      }\r\n    } else {\r\n      addEntry(personObj)\r\n        .then(_ => {\r\n        contactsRefresh(setPersons)\r\n        actionMsg(setActMsg, `Contact ${personObj.name} added`)\r\n        setNewName('')\r\n        setNewNumber('')\r\n        }\r\n      )\r\n        .catch(error => {\r\n          console.log(error, error.message)\r\n          errMsg(setError, `Cannot add a contact - ${error.response.data.error}`)\r\n        })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <h2>Add contacts</h2>\r\n      <form onSubmit={handleAdd}>\r\n        <div className='add-contact'>\r\n          <p>Name: <input value={newName} onChange={handleNameInput}/></p>\r\n          <p>Phone: <input value={newNumber} onChange={handlePhoneInput}/></p>\r\n          <button type=\"submit\">Add</button>\r\n        </div>\r\n      </form> \r\n    </>\r\n  )\r\n}\r\n\r\nconst ErrorMsg = ({msg}) => {\r\n  if (msg) {\r\n    return (\r\n      <div className='error'>\r\n        {msg}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst ActMsg = ({msg}) => {\r\n  if (msg) {\r\n    return (\r\n      <div className='plate'>\r\n        {msg}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst App = () => {\r\n  const [newSearch, setSearch] = useState('')\r\n  const [persons, setPersons] = useState()\r\n  const [error, setError] = useState('')\r\n  const [actionMsg, setActMsg] = useState('')\r\n  useEffect(() => {\r\n      contactsRefresh(setPersons)\r\n    }, [])\r\n  return (\r\n    <div>\r\n      <ErrorMsg msg={error} />\r\n      <ActMsg msg={actionMsg} />\r\n      <h1>Phonebook</h1>\r\n      <Search newSearch={newSearch} setSearch={setSearch} />\r\n      <Persons persons={persons} setPersons={setPersons} newSearch={newSearch} setError={setError} setActMsg={setActMsg}/>\r\n      <AddContact persons={persons} setPersons={setPersons} setError={setError} setActMsg={setActMsg}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\n\r\nimport App from './App'\r\n\r\nReactDOM.createRoot(document.getElementById('root')).render(<App />)"],"sourceRoot":""}